<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QuIDS: Quantum Irregular Dynamic Simulator: src/quids_mpi.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">QuIDS: Quantum Irregular Dynamic Simulator
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">quids_mpi.hpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;quids.hpp&quot;</code><br />
<code>#include &lt;mpi.h&gt;</code><br />
<code>#include &quot;utils/mpi_utils.hpp&quot;</code><br />
</div>
<p><a href="quids__mpi_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquids_1_1mpi_1_1mpi__iteration.html">quids::mpi::mpi_iteration</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">mpi iteration (wave function) class, ineriting from the <a class="el" href="classquids_1_1iteration.html" title="iteration (wave function) representation class">quids::iteration</a> class  <a href="classquids_1_1mpi_1_1mpi__iteration.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classquids_1_1mpi_1_1mpi__symbolic__iteration.html">quids::mpi::mpi_symbolic_iteration</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">symbolic mpi iteration (computation intermediary)  <a href="classquids_1_1mpi_1_1mpi__symbolic__iteration.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacequids"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacequids.html">quids</a></td></tr>
<tr class="memdesc:namespacequids"><td class="mdescLeft">&#160;</td><td class="mdescRight">QuIDS namespace. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacequids_1_1mpi"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacequids_1_1mpi.html">quids::mpi</a></td></tr>
<tr class="memdesc:namespacequids_1_1mpi"><td class="mdescLeft">&#160;</td><td class="mdescRight">mpi implementation namespace <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab5e6c9297c3ac08786f8224dfa2e06c8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="quids__mpi_8hpp.html#ab5e6c9297c3ac08786f8224dfa2e06c8">GRANULARITY</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:ab5e6c9297c3ac08786f8224dfa2e06c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">granularity, i.e. the typical loop size we consider when doing a 2d loop.  <a href="quids__mpi_8hpp.html#ab5e6c9297c3ac08786f8224dfa2e06c8">More...</a><br /></td></tr>
<tr class="separator:ab5e6c9297c3ac08786f8224dfa2e06c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a4d3943ddea65db7163a58e6c7e8df95a"><td class="memItemLeft" align="right" valign="top"><a id="a4d3943ddea65db7163a58e6c7e8df95a" name="a4d3943ddea65db7163a58e6c7e8df95a"></a>
typedef unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>uint</b></td></tr>
<tr class="separator:a4d3943ddea65db7163a58e6c7e8df95a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35f6cb8275fdb46ab6042a3e4bd799ba"><td class="memItemLeft" align="right" valign="top"><a id="a35f6cb8275fdb46ab6042a3e4bd799ba" name="a35f6cb8275fdb46ab6042a3e4bd799ba"></a>
typedef class mpi_iteration&#160;</td><td class="memItemRight" valign="bottom"><b>quids::mpi::mpi_it_t</b></td></tr>
<tr class="memdesc:a35f6cb8275fdb46ab6042a3e4bd799ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">mpi iteration type <br /></td></tr>
<tr class="separator:a35f6cb8275fdb46ab6042a3e4bd799ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e3b2dbb59ff2b0f9b997fb9bf196cc8"><td class="memItemLeft" align="right" valign="top"><a id="a3e3b2dbb59ff2b0f9b997fb9bf196cc8" name="a3e3b2dbb59ff2b0f9b997fb9bf196cc8"></a>
typedef class mpi_symbolic_iteration&#160;</td><td class="memItemRight" valign="bottom"><b>quids::mpi::mpi_sy_it_t</b></td></tr>
<tr class="memdesc:a3e3b2dbb59ff2b0f9b997fb9bf196cc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">mpi symbolic iteration type <br /></td></tr>
<tr class="separator:a3e3b2dbb59ff2b0f9b997fb9bf196cc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab589d2622e28bfe6e3522a103c841450"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacequids_1_1mpi.html#ab589d2622e28bfe6e3522a103c841450">quids::mpi::simulate</a> (mpi_it_t &amp;iteration, <a class="el" href="namespacequids.html#a62455c8f5240a575676aace3a25dfae3">quids::rule_t</a> const *rule, mpi_it_t &amp;next_iteration, mpi_sy_it_t &amp;symbolic_iteration, MPI_Comm communicator, size_t max_num_object=0, <a class="el" href="namespacequids.html#a42e549faf01dce4f7e39af6770c1a780">quids::debug_t</a> mid_step_function=[](const char *){})</td></tr>
<tr class="memdesc:ab589d2622e28bfe6e3522a103c841450"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to apply a dynamic to a wave function distributed accross multiple nodes  <a href="namespacequids_1_1mpi.html#ab589d2622e28bfe6e3522a103c841450">More...</a><br /></td></tr>
<tr class="separator:ab589d2622e28bfe6e3522a103c841450"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a31fde7b46759670da2fe0f6b3731f5c0"><td class="memItemLeft" align="right" valign="top"><a id="a31fde7b46759670da2fe0f6b3731f5c0" name="a31fde7b46759670da2fe0f6b3731f5c0"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>quids::mpi::min_equalize_size</b> = MIN_EQUALIZE_SIZE</td></tr>
<tr class="memdesc:a31fde7b46759670da2fe0f6b3731f5c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">minimum number of object that should be attained (in at least one node) before equalizing (load-sharing) bewteen nodes. <br /></td></tr>
<tr class="separator:a31fde7b46759670da2fe0f6b3731f5c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5de5240ccfc019063996bdc48e7a20b"><td class="memItemLeft" align="right" valign="top"><a id="ab5de5240ccfc019063996bdc48e7a20b" name="ab5de5240ccfc019063996bdc48e7a20b"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>quids::mpi::equalize_inbalance</b> = EQUALIZE_INBALANCE</td></tr>
<tr class="memdesc:ab5de5240ccfc019063996bdc48e7a20b"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum imbalance between nodes (max_obj - avg_obj)/max_obj allowed before equalizing. <br /></td></tr>
<tr class="separator:ab5de5240ccfc019063996bdc48e7a20b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20bc2eedd44dbcc296f16bcdd33ccec9"><td class="memItemLeft" align="right" valign="top"><a id="a20bc2eedd44dbcc296f16bcdd33ccec9" name="a20bc2eedd44dbcc296f16bcdd33ccec9"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>quids::mpi::equalize_children</b> = true</td></tr>
<tr class="memdesc:a20bc2eedd44dbcc296f16bcdd33ccec9"><td class="mdescLeft">&#160;</td><td class="mdescRight">if true, equalize the number of children. Otherwise equalize the number of objects. <br /></td></tr>
<tr class="separator:a20bc2eedd44dbcc296f16bcdd33ccec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ab5e6c9297c3ac08786f8224dfa2e06c8" name="ab5e6c9297c3ac08786f8224dfa2e06c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5e6c9297c3ac08786f8224dfa2e06c8">&#9670;&nbsp;</a></span>GRANULARITY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GRANULARITY&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>granularity, i.e. the typical loop size we consider when doing a 2d loop. </p>
<p >The idea is that GRANULARITY should be large enough for the loop to gain from cache optimization, while being small enough to be considered "small" compared to the number of object per thread.</p>
<p >This is used to introduce some "implicite work stealing" without killing performance, by inserting "GRANULARITY" object from each node into the hashmap when computing collisions, before moving to the next node. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
