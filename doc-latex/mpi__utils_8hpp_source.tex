\hypertarget{mpi__utils_8hpp_source}{}\doxysection{mpi\+\_\+utils.\+hpp}
\label{mpi__utils_8hpp_source}\index{src/utils/mpi\_utils.hpp@{src/utils/mpi\_utils.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 }
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include <mpi.h>}}
\DoxyCodeLine{4 }
\DoxyCodeLine{6 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacequids_1_1mpi_1_1utils}{quids::mpi::utils}} \{}
\DoxyCodeLine{7 }
\DoxyCodeLine{9     \textcolor{keywordtype}{void} \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_a557281f8db1c0cf80b3d9d6cd9563315}{make\_equal\_pairs}}(\textcolor{keywordtype}{size\_t} *size\_begin, \textcolor{keywordtype}{size\_t} *size\_end, \textcolor{keywordtype}{int} *pair\_id) \{}
\DoxyCodeLine{10         \textcolor{keywordtype}{size\_t} size = std::distance(size\_begin, size\_end);}
\DoxyCodeLine{11 }
\DoxyCodeLine{12         std::vector<int> node\_ids(size, 0);}
\DoxyCodeLine{13         std::iota(node\_ids.begin(), node\_ids.begin() + size, 0);}
\DoxyCodeLine{14 }
\DoxyCodeLine{15         \textcolor{comment}{/* compute average value */}}
\DoxyCodeLine{16         \_\_gnu\_parallel::sort(node\_ids.begin(), node\_ids.begin() + size,}
\DoxyCodeLine{17             [\&](\textcolor{keywordtype}{int} \textcolor{keyword}{const} node\_id1, \textcolor{keywordtype}{int} \textcolor{keyword}{const} node\_id2) \{}
\DoxyCodeLine{18                 return size\_begin[node\_id1] > size\_begin[node\_id2];}
\DoxyCodeLine{19             \});}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{preprocessor}{        \#pragma omp parallel for}}
\DoxyCodeLine{22         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < size; ++i)}
\DoxyCodeLine{23             pair\_id[node\_ids[i]] = node\_ids[size -\/ i -\/ 1];}
\DoxyCodeLine{24     \} }
\DoxyCodeLine{25 }
\DoxyCodeLine{27 }
\DoxyCodeLine{32     \textcolor{keyword}{template}<\textcolor{keyword}{typename} T>}
\DoxyCodeLine{33     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(T x) \{ \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{34     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(\textcolor{keywordtype}{float} x) \{ \textcolor{keywordflow}{return} MPI\_FLOAT; \}}
\DoxyCodeLine{35     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(\textcolor{keywordtype}{double} x) \{ \textcolor{keywordflow}{return} MPI\_DOUBLE; \}}
\DoxyCodeLine{36     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(\textcolor{keywordtype}{long} \textcolor{keywordtype}{double} x) \{ \textcolor{keywordflow}{return} MPI\_LONG\_DOUBLE; \}}
\DoxyCodeLine{37     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(std::complex<float> x) \{ \textcolor{keywordflow}{return} MPI\_COMPLEX; \}}
\DoxyCodeLine{38     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(std::complex<double> x) \{ \textcolor{keywordflow}{return} MPI\_DOUBLE\_COMPLEX; \}}
\DoxyCodeLine{39     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(std::complex<long double> x) \{ \textcolor{keywordflow}{return} MPI\_C\_LONG\_DOUBLE\_COMPLEX; \}}
\DoxyCodeLine{40     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(\textcolor{keywordtype}{bool} x) \{ \textcolor{keywordflow}{return} MPI\_CHAR; \}}
\DoxyCodeLine{41     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(\textcolor{keywordtype}{char} x) \{ \textcolor{keywordflow}{return} MPI\_CHAR; \}}
\DoxyCodeLine{42     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(\textcolor{keywordtype}{signed} \textcolor{keywordtype}{char} x) \{ \textcolor{keywordflow}{return} MPI\_SIGNED\_CHAR; \}}
\DoxyCodeLine{43     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} x) \{ \textcolor{keywordflow}{return} MPI\_UNSIGNED\_CHAR; \}}
\DoxyCodeLine{44     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(\textcolor{keywordtype}{short} x) \{ \textcolor{keywordflow}{return} MPI\_SHORT; \}}
\DoxyCodeLine{45     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} x) \{ \textcolor{keywordflow}{return} MPI\_UNSIGNED\_SHORT; \}}
\DoxyCodeLine{46     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(\textcolor{keywordtype}{int} x) \{ \textcolor{keywordflow}{return} MPI\_INT; \}}
\DoxyCodeLine{47     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} x) \{ \textcolor{keywordflow}{return} MPI\_UNSIGNED; \}}
\DoxyCodeLine{48     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(\textcolor{keywordtype}{long} x) \{ \textcolor{keywordflow}{return} MPI\_LONG; \}}
\DoxyCodeLine{49     MPI\_Datatype \mbox{\hyperlink{namespacequids_1_1mpi_1_1utils_acb65382b618071f4807c93138ee174ee}{get\_mpi\_datatype}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} x) \{ \textcolor{keywordflow}{return} MPI\_UNSIGNED\_LONG; \}}
\DoxyCodeLine{50 \}}

\end{DoxyCode}
