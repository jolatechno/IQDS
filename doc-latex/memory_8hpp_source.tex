\hypertarget{memory_8hpp_source}{}\doxysection{memory.\+hpp}
\label{memory_8hpp_source}\index{src/utils/memory.hpp@{src/utils/memory.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{This is the only utilisy that is operating-\/system dependent !}}
\DoxyCodeLine{3 \textcolor{comment}{*/}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{6 }
\DoxyCodeLine{8 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacequids_1_1utils}{quids::utils}} \{}
\DoxyCodeLine{9 \textcolor{preprocessor}{    \#ifdef \_\_CYGWIN\_\_ }\textcolor{comment}{// windows systems}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{preprocessor}{    \#include <windows.h>}}
\DoxyCodeLine{12 }
\DoxyCodeLine{14     \textcolor{keywordtype}{size\_t} \textcolor{keyword}{inline} \mbox{\hyperlink{namespacequids_1_1utils_a594be390cd1aec6c1c991ee8242917b6}{get\_free\_mem}}() \{}
\DoxyCodeLine{15         MEMORYSTATUSEX statex;}
\DoxyCodeLine{16         statex.dwLength = \textcolor{keyword}{sizeof} (statex);}
\DoxyCodeLine{17         GlobalMemoryStatusEx (\&statex);}
\DoxyCodeLine{18 }
\DoxyCodeLine{19         \textcolor{keywordflow}{return} statex.AvailPageFile; \textcolor{comment}{// free virtual memory instead of free physical memory...}}
\DoxyCodeLine{20     \}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{preprocessor}{    \#elif defined(\_\_linux\_\_) }\textcolor{comment}{// linux systems}}
\DoxyCodeLine{23 }
\DoxyCodeLine{25     \textcolor{keywordtype}{size\_t} \textcolor{keyword}{inline} \mbox{\hyperlink{namespacequids_1_1utils_a594be390cd1aec6c1c991ee8242917b6}{get\_free\_mem}}() \{}
\DoxyCodeLine{26         \textcolor{keywordtype}{char} buff[128];}
\DoxyCodeLine{27         \textcolor{keywordtype}{char} useless[128];}
\DoxyCodeLine{28         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} free\_mem = 0;}
\DoxyCodeLine{29 }
\DoxyCodeLine{30         FILE *fd = fopen(\textcolor{stringliteral}{"{}/proc/meminfo"{}}, \textcolor{stringliteral}{"{}r"{}});}
\DoxyCodeLine{31 }
\DoxyCodeLine{32         fgets(buff, \textcolor{keyword}{sizeof}(buff), fd); }
\DoxyCodeLine{33         fgets(buff, \textcolor{keyword}{sizeof}(buff), fd); }
\DoxyCodeLine{34         sscanf(buff, \textcolor{stringliteral}{"{}\%s \%lu "{}}, useless, \&free\_mem); }
\DoxyCodeLine{35 }
\DoxyCodeLine{36         \textcolor{keywordflow}{return} free\_mem * 1000; }
\DoxyCodeLine{37     \}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39 \textcolor{preprocessor}{    \#elif defined(\_\_unix\_\_) }\textcolor{comment}{// other unix systems}}
\DoxyCodeLine{40 \textcolor{preprocessor}{        \#error "{}UNIX system other than LINUX aren't supported for now"{}}}
\DoxyCodeLine{41 \textcolor{preprocessor}{    \#elif defined(\_\_MACH\_\_) }\textcolor{comment}{// mac os systems}}
\DoxyCodeLine{42 \textcolor{preprocessor}{        \#error "{}macos isn't supported for now !"{}}}
\DoxyCodeLine{43 \textcolor{preprocessor}{    \#else }\textcolor{comment}{// other systems}}
\DoxyCodeLine{44 \textcolor{preprocessor}{        \#error "{}system isn't supported"{}}}
\DoxyCodeLine{45 }
\DoxyCodeLine{47         \textcolor{keywordtype}{size\_t} \textcolor{keyword}{inline} \mbox{\hyperlink{namespacequids_1_1utils_a594be390cd1aec6c1c991ee8242917b6}{get\_free\_mem}}() \{ \textcolor{keywordflow}{return} 0; \}}
\DoxyCodeLine{48 \textcolor{preprocessor}{    \#endif}}
\DoxyCodeLine{49 \}}

\end{DoxyCode}
